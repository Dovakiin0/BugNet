import{e as ot,j as e,c as _,X as te,r as p,i as ne,h as rt,x as b,k as w,a1 as he,f as st,g as it,o as at,$ as lt,a as ct,F as h,T as c,u as me,L as dt,a7 as ut}from"./index-f429a3a2.js";import{b as ht,c as mt}from"./useProject-d2e7c450.js";import{m as Se,G as pt,f as Ke,e as re,g as xt,D as gt}from"./index.esm-d2940f43.js";import{B as we}from"./Bugs-cec3147d.js";import{E as Ie}from"./Empty-add6c56a.js";import{M as ft,b as jt,c as yt,h as bt,N as se,T as vt,d as Ct,e as Pe,f as kt,g as Be,j as St,k as wt,i as It}from"./NormalTextField-5f14694a.js";import{a as De,S as X}from"./Skeleton-f621728e.js";import{i as Pt,F as Ne,c as Ue,a as ie,b as $e,T as qe,B as U}from"./TextField-ce948f6e.js";import{g as Bt,F as pe,U as Dt,b as oe,a as xe,h as Et,u as G,I as He,W as Ee}from"./useBugs-760b31ba.js";import{u as ge}from"./useToast-df057416.js";import{S as ae,m as zt,r as Tt,T as le,a as ce,D as At,b as Lt,P as ze,c as Te,d as Ae,e as Le,f as Fe,g as Me,A as Ft}from"./AvatarChip-6317b858.js";import{B as I}from"./chunk-6CSUKJP7-63a6ae26.js";import{a as We,l as Mt}from"./index-7aba2231.js";import{a as Y,u as Qe}from"./axios-97cd80af.js";import"./index-8eb5a6aa.js";var[Fn,Ot]=ot({name:"CheckboxGroupContext",strict:!1});function Rt(t){return e.jsx(_.svg,{width:"1.2em",viewBox:"0 0 12 10",style:{fill:"none",strokeWidth:2,stroke:"currentColor",strokeDasharray:16},...t,children:e.jsx("polyline",{points:"1.5 6 4.5 9 10.5 1"})})}function _t(t){return e.jsx(_.svg,{width:"1.2em",viewBox:"0 0 24 24",style:{stroke:"currentColor",strokeWidth:4},...t,children:e.jsx("line",{x1:"21",x2:"3",y1:"12",y2:"12"})})}function Gt(t){const{isIndeterminate:o,isChecked:n,...r}=t,i=o?_t:Rt;return n||o?e.jsx(_.div,{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:e.jsx(i,{...r})}):null}var Kt={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Oe=!1,$=null,M=!1,de=!1,ue=new Set;function fe(t,o){ue.forEach(n=>n(t,o))}var Nt=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function Ut(t){return!(t.metaKey||!Nt&&t.altKey||t.ctrlKey||t.key==="Control"||t.key==="Shift"||t.key==="Meta")}function Re(t){M=!0,Ut(t)&&($="keyboard",fe("keyboard",t))}function R(t){if($="pointer",t.type==="mousedown"||t.type==="pointerdown"){M=!0;const o=t.composedPath?t.composedPath()[0]:t.target;let n=!1;try{n=o.matches(":focus-visible")}catch{}if(n)return;fe("pointer",t)}}function $t(t){return t.mozInputSource===0&&t.isTrusted?!0:t.detail===0&&!t.pointerType}function qt(t){$t(t)&&(M=!0,$="virtual")}function Ht(t){t.target===window||t.target===document||(!M&&!de&&($="virtual",fe("virtual",t)),M=!1,de=!1)}function Wt(){M=!1,de=!0}function _e(){return $!=="pointer"}function Qt(){if(typeof window>"u"||Oe)return;const{focus:t}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...n){M=!0,t.apply(this,n)},document.addEventListener("keydown",Re,!0),document.addEventListener("keyup",Re,!0),document.addEventListener("click",qt,!0),window.addEventListener("focus",Ht,!0),window.addEventListener("blur",Wt,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",R,!0),document.addEventListener("pointermove",R,!0),document.addEventListener("pointerup",R,!0)):(document.addEventListener("mousedown",R,!0),document.addEventListener("mousemove",R,!0),document.addEventListener("mouseup",R,!0)),Oe=!0}function Vt(t){Qt(),t(_e());const o=()=>t(_e());return ue.add(o),()=>{ue.delete(o)}}function Xt(t,o=[]){const n=Object.assign({},t);for(const r of o)r in n&&delete n[r];return n}function Yt(t={}){const o=Pt(t),{isDisabled:n,isReadOnly:r,isRequired:i,isInvalid:a,id:m,onBlur:x,onFocus:y,"aria-describedby":j}=o,{defaultChecked:d,isChecked:v,isFocusable:P,onChange:B,isIndeterminate:g,name:D,value:s,tabIndex:f=void 0,"aria-label":E,"aria-labelledby":T,"aria-invalid":u,...C}=t,k=Xt(C,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),z=te(B),K=te(x),q=te(y),[H,Xe]=p.useState(!1),[N,W]=p.useState(!1),[J,je]=p.useState(!1),[Z,O]=p.useState(!1);p.useEffect(()=>Vt(Xe),[]);const A=p.useRef(null),[ye,Ye]=p.useState(!0),[Je,Q]=p.useState(!!d),ee=v!==void 0,S=ee?v:Je,be=p.useCallback(l=>{if(r||n){l.preventDefault();return}ee||Q(S?l.target.checked:g?!0:l.target.checked),z==null||z(l)},[r,n,S,ee,g,z]);ne(()=>{A.current&&(A.current.indeterminate=Boolean(g))},[g]),rt(()=>{n&&W(!1)},[n,W]),ne(()=>{const l=A.current;l!=null&&l.form&&(l.form.onreset=()=>{Q(!!d)})},[]);const ve=n&&!P,Ce=p.useCallback(l=>{l.key===" "&&O(!0)},[O]),ke=p.useCallback(l=>{l.key===" "&&O(!1)},[O]);ne(()=>{if(!A.current)return;A.current.checked!==S&&Q(A.current.checked)},[A.current]);const Ze=p.useCallback((l={},L=null)=>{const F=V=>{N&&V.preventDefault(),O(!0)};return{...l,ref:L,"data-active":b(Z),"data-hover":b(J),"data-checked":b(S),"data-focus":b(N),"data-focus-visible":b(N&&H),"data-indeterminate":b(g),"data-disabled":b(n),"data-invalid":b(a),"data-readonly":b(r),"aria-hidden":!0,onMouseDown:w(l.onMouseDown,F),onMouseUp:w(l.onMouseUp,()=>O(!1)),onMouseEnter:w(l.onMouseEnter,()=>je(!0)),onMouseLeave:w(l.onMouseLeave,()=>je(!1))}},[Z,S,n,N,H,J,g,a,r]),et=p.useCallback((l={},L=null)=>({...k,...l,ref:Se(L,F=>{F&&Ye(F.tagName==="LABEL")}),onClick:w(l.onClick,()=>{var F;ye||((F=A.current)==null||F.click(),requestAnimationFrame(()=>{var V;(V=A.current)==null||V.focus()}))}),"data-disabled":b(n),"data-checked":b(S),"data-invalid":b(a)}),[k,n,S,a,ye]),tt=p.useCallback((l={},L=null)=>({...l,ref:Se(A,L),type:"checkbox",name:D,value:s,id:m,tabIndex:f,onChange:w(l.onChange,be),onBlur:w(l.onBlur,K,()=>W(!1)),onFocus:w(l.onFocus,q,()=>W(!0)),onKeyDown:w(l.onKeyDown,Ce),onKeyUp:w(l.onKeyUp,ke),required:i,checked:S,disabled:ve,readOnly:r,"aria-label":E,"aria-labelledby":T,"aria-invalid":u?Boolean(u):a,"aria-describedby":j,"aria-disabled":n,style:Kt}),[D,s,m,be,K,q,Ce,ke,i,S,ve,r,E,T,u,a,j,n,f]),nt=p.useCallback((l={},L=null)=>({...l,ref:L,onMouseDown:w(l.onMouseDown,Ge),onTouchStart:w(l.onTouchStart,Ge),"data-disabled":b(n),"data-checked":b(S),"data-invalid":b(a)}),[S,n,a]);return{state:{isInvalid:a,isFocused:N,isChecked:S,isActive:Z,isHovered:J,isIndeterminate:g,isDisabled:n,isReadOnly:r,isRequired:i},getRootProps:et,getCheckboxProps:Ze,getInputProps:tt,getLabelProps:nt,htmlProps:k}}function Ge(t){t.preventDefault(),t.stopPropagation()}var Jt={display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",userSelect:"none",flexShrink:0},Zt={cursor:"pointer",display:"inline-flex",alignItems:"center",verticalAlign:"top",position:"relative"},en=he({from:{opacity:0,strokeDashoffset:16,transform:"scale(0.95)"},to:{opacity:1,strokeDashoffset:0,transform:"scale(1)"}}),tn=he({from:{opacity:0},to:{opacity:1}}),nn=he({from:{transform:"scaleX(0.65)"},to:{transform:"scaleX(1)"}}),Ve=st(function(o,n){const r=Ot(),i={...r,...o},a=it("Checkbox",i),m=at(o),{spacing:x="0.5rem",className:y,children:j,iconColor:d,iconSize:v,icon:P=e.jsx(Gt,{}),isChecked:B,isDisabled:g=r==null?void 0:r.isDisabled,onChange:D,inputProps:s,...f}=m;let E=B;r!=null&&r.value&&m.value&&(E=r.value.includes(m.value));let T=D;r!=null&&r.onChange&&m.value&&(T=lt(r.onChange,D));const{state:u,getInputProps:C,getCheckboxProps:k,getLabelProps:z,getRootProps:K}=Yt({...f,isDisabled:g,isChecked:E,onChange:T}),q=p.useMemo(()=>({animation:u.isIndeterminate?`${tn} 20ms linear, ${nn} 200ms linear`:`${en} 200ms linear`,fontSize:v,color:d,...a.icon}),[d,v,,u.isIndeterminate,a.icon]),H=p.cloneElement(P,{__css:q,isIndeterminate:u.isIndeterminate,isChecked:u.isChecked});return e.jsxs(_.label,{__css:{...Zt,...a.container},className:ct("chakra-checkbox",y),...K(),children:[e.jsx("input",{className:"chakra-checkbox__input",...C(s,n)}),e.jsx(_.span,{__css:{...Jt,...a.control},className:"chakra-checkbox__control",...k(),children:H}),j&&e.jsx(_.span,{className:"chakra-checkbox__label",...z(),__css:{marginStart:x,...a.label},children:j})]})});Ve.displayName="Checkbox";function on(t){return pt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"}}]})(t)}function rn({isOpen:t,onClose:o,project:n}){const r={title:""},[i,a]=p.useState(null),[m,x]=p.useState(0),{successToast:y,errorToast:j}=ge(),[d,v]=p.useState(`### Bug Description

### Steps to Reproduce
1. 
2. 
3. 
### Expected Output

### Actual Output

`),{mutateAsync:P}=Bt();function B(s,{setSubmitting:f}){let E=n.Kanban.Board.filter(u=>u.title==="Backlog")[0].id,T={title:s.title,projectId:n.id,description:d,priority:m,categoryId:i,boardId:E};P(T,{onSuccess:()=>{y(`Bug ${s.title} created successfully`)},onError:()=>{j("Error creating bug")}}),f(!1),o()}const g=s=>{if(s.target.value==="")return a(null);a(s.target.value)},D=s=>{x(s.target.value)};return e.jsx(pe,{isOpen:t,onClose:o,header:"Create New Bug",children:e.jsx(Ne,{initialValues:r,onSubmit:B,validationSchema:Ue({title:ie().required("Bug Title is required")}),children:({isSubmitting:s})=>e.jsx($e,{children:e.jsxs(h,{flexDirection:"column",gap:"5",maxWidth:"900px",children:[e.jsx(qe,{type:"text",name:"title",label:"Bug Title",width:"500px",placeholder:"Enter a short yet descriptive title for the bug"}),e.jsxs(h,{align:"center",gap:"3",children:[e.jsxs(I,{children:[e.jsx(c,{children:"Assign Category"}),e.jsxs(ae,{name:"categoryId",fontSize:"sm",width:"250px",onChange:g,children:[e.jsx("option",{style:{backgroundColor:"black",color:"white"},value:"",children:"Assign Category for bug"}),n.Category.map(f=>e.jsx("option",{style:{backgroundColor:"black",color:"white"},value:f.id,children:f.title},f.id))]})]}),e.jsxs(I,{children:[e.jsx(c,{children:"Set Priority"}),e.jsxs(ae,{name:"pririty",fontSize:"sm",width:"250px",onChange:D,children:[e.jsx("option",{style:{backgroundColor:"black",color:"white"},value:0,children:"Low"}),e.jsx("option",{style:{backgroundColor:"black",color:"white"},value:1,children:"High"}),e.jsx("option",{style:{backgroundColor:"black",color:"white"},value:2,children:"Critical"})]})]})]}),e.jsxs(I,{children:[e.jsx(c,{children:"Bug Description"}),e.jsxs(c,{fontSize:"sm",color:"primary.200",children:["A Good Bug description should include:",e.jsxs(Dt,{children:[e.jsx(oe,{children:"Detailed description of the bug"}),e.jsx(oe,{children:"Steps to reproduce the behaviour"}),e.jsx(oe,{children:"Expected vs Actual output"})]})]})]}),e.jsx(I,{width:"900px",children:e.jsx(zt,{"data-color-mode":"dark",value:d,onChange:v,height:500,previewOptions:{rehypePlugins:[Tt]},preview:"edit"})}),e.jsxs(h,{gap:"1",children:[e.jsx(c,{fontSize:"sm",color:"primary.200",children:"You are creating this bug on Project"}),e.jsxs(c,{fontSize:"sm",fontWeight:"bold",children:[": ",n.title]})]}),e.jsx(U,{disabled:s,type:"submit",colorScheme:"brand",fontSize:"md",size:"md",children:"Submit"})]})})})})}async function sn(){return await Y.get("/api/v1/github/repo",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})}async function an({repo:t}){return await Y.get(`/api/v1/github/issue/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})}const ln=()=>We(["repos"],()=>sn()),cn=t=>We(["issues",t],()=>an(t),{enabled:t.enabled});function dn({isOpen:t,onClose:o,pid:n,project:r}){var T;const[i,a]=p.useState(null),[m,x]=p.useState(null),y=xe(u=>u.user),j=ln(),d=me(),v=Et(),{successToast:P,errorToast:B}=ge(),g=cn({repo:i,enabled:i!==null}),D=u=>{u.target.value!=="none"&&(a(u.target.value),x(null),Promise.all([d.invalidateQueries(["repos"]),d.invalidateQueries(["issues"])]))},s=(u,C)=>{x(k=>({...k,[C.title]:{checked:u.target.checked,title:C.title,description:C.body===null?"":C.body}}))},f=u=>{if(u.preventDefault(),m===null){B("No Issues Selected");return}let C=r.Kanban.Board.filter(z=>z.title==="Backlog")[0].id,k=[];Object.keys(m).map((z,K)=>{m[z].checked&&k.push({projectId:n,title:m[z].title,description:m[z].description,boardId:C})}),v.mutateAsync({pid:n,payload:k},{onSuccess:()=>{P("All Bugs imported Successfully"),o()}})},E=()=>{};return e.jsx(pe,{isOpen:t,onClose:o,header:"Import Issues from Github",children:y!=null&&y.Github?e.jsxs(h,{flexDir:"column",gap:"5",maxWidth:"900px",marginTop:"5",children:[e.jsxs(I,{children:[e.jsx(c,{color:"primary.200",size:"sm",marginBottom:"5px",children:"Select Repository"}),e.jsxs(ae,{name:"repo",fontSize:"sm",width:"600px",onChange:D,children:[e.jsx("option",{style:{backgroundColor:"black",color:"white"},value:"none",children:"Select your repo"}),j.data&&j.data.data.items.map((u,C)=>e.jsx("option",{value:u.name,style:{backgroundColor:"black",color:"white"},children:u.full_name},C))]})]}),e.jsxs(I,{children:[e.jsx(c,{color:"primary.200",size:"sm",marginBottom:"5px",children:"Select all Issues that you want to import"}),i===null?e.jsx(h,{flexDir:"column",gap:"2",border:"1px solid gray",rounded:"10",padding:"10px",borderStyle:"dotted",height:"500px",maxHeight:"500px",overflowY:"auto",justify:"center",align:"center",children:e.jsx(c,{color:"primary.200",children:"Select a repository"})}):e.jsx(h,{flexDir:"column",gap:"2",border:"1px solid gray",rounded:"10",padding:"10px",borderStyle:"dotted",height:"500px",maxHeight:"500px",overflowY:"auto",children:g.isLoading?e.jsx(dt,{}):g.data&&((T=g.data)==null?void 0:T.data.length)>0?g.data.data.map((u,C)=>e.jsx(Ve,{colorScheme:"brand",onChange:k=>s(k,u),children:e.jsx(c,{fontSize:"sm",children:u.title})},C)):e.jsx(c,{color:"primary.200",children:"No Issues found"})})]}),e.jsx(U,{type:"submit",colorScheme:"brand",fontSize:"md",size:"md",onClick:f,children:"Import"})]}):e.jsxs(h,{align:"center",justify:"center",height:"90vh",width:"full",children:[e.jsx(U,{bg:"primary.500",_hover:{bg:"primary.900"},leftIcon:e.jsx(Ke,{}),onClick:E,width:"200px",children:"Connect Github"})," "]})})}function un({isLoading:t,project:o}){const n=G(),r=G();return e.jsxs(e.Fragment,{children:[e.jsx(rn,{isOpen:n.isOpen,onClose:n.onClose,project:o}),e.jsx(dn,{project:o,isOpen:r.isOpen,onClose:r.onClose,pid:o.id}),e.jsxs(I,{rounded:10,width:"full",children:[e.jsxs(h,{justify:"space-between",margin:"10px",children:[e.jsx(c,{fontSize:"xl",children:"BUGS"}),e.jsxs(h,{align:"center",gap:"3",children:[e.jsxs(ft,{children:[e.jsx(jt,{children:e.jsx(He,{bg:"primary.900",color:"primary.100",icon:e.jsx(on,{}),"aria-label":"bug-menu",_hover:{bg:"primary.800"}})}),e.jsx(yt,{bg:"primary.700",border:"none",children:e.jsx(bt,{color:"primary.100",bg:"primary.700",_hover:{bg:"brand.500"},icon:e.jsx(Ke,{size:"20"}),onClick:r.onOpen,children:"Import from Github"})})]}),e.jsx(U,{leftIcon:e.jsx(re,{}),colorScheme:"brand",fontSize:"sm",size:"sm",onClick:n.onOpen,children:"Create New"})]})]}),e.jsx(I,{margin:"10px",children:e.jsx(se,{placeholder:"Search in this project",size:"md"})}),e.jsxs(vt,{isFitted:!0,size:"sm",variant:"soft-rounded",children:[e.jsxs(Ct,{children:[e.jsx(Pe,{_selected:{bg:"green.500",color:"white"},children:"Open"}),e.jsx(Pe,{_selected:{bg:"red.500",color:"white"},children:"Closed"})]}),e.jsxs(kt,{children:[e.jsx(Be,{children:e.jsx(De,{direction:"column",spacing:"4",padding:"10px",children:t?e.jsx(X,{height:"40px"}):o.Bug.length>0?o.Bug.map(i=>i.status==="Open"&&e.jsx(we,{projectTitle:o.title,author:i.User.username,...i},i.id)):e.jsx(Ie,{message:"Create a new bug to get started!"})})}),e.jsx(Be,{children:e.jsx(De,{direction:"column",spacing:"4",padding:"10px",children:t?e.jsx(X,{height:"40px"}):o.Bug.length>0?o.Bug.map(i=>i.status==="Closed"&&e.jsx(we,{projectTitle:o.title,author:i.User.username,...i},i.id)):e.jsx(Ie,{message:"Create a new bug to get started!"})})})]})]})]})]})}function hn({key:t,label:o,onDelete:n,colorScheme:r,isOwner:i=!0}){const{isOpen:a,onClose:m,onOpen:x}=G();return e.jsxs(le,{size:"lg",borderRadius:"full",variant:"solid",colorScheme:r,children:[e.jsx(ce,{children:o}),i&&e.jsx(At,{isOpen:a,onClose:m,onConfirm:n,children:e.jsx(Lt,{onClick:x})})]},t)}async function mn(t){const{data:o}=await Y.post(`/api/v1/categories/${t.pid}`,{title:t.title},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return o}async function pn(t){const{data:o}=await Y.delete(`/api/v1/categories/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return o}const xn=()=>{const t=me();return Qe(pn,{onSuccess:(o,n,r)=>{t.invalidateQueries(["project",n])}})},gn=()=>{const t=me();return Qe(mn,{onSuccess:(o,n)=>{t.invalidateQueries(["project",o.projectId])}})};function fn({categories:t,teams:o,pid:n,isOwner:r}){const i=G(),a=G();let m=Mt("wss://bugnet.onrender.com");const x=xe(s=>s.user),y=gn(),j=xn(),d=St(),v=wt(),P=s=>{s.key==="Enter"&&s.target.value!==""&&(y.mutateAsync({pid:n,title:s.target.value}),i.onClose(),s.target.value="")},B=s=>{j.mutateAsync(s)},g=s=>{s.key==="Enter"&&s.target.value!==""&&(d.mutateAsync({pid:n,email:s.target.value},{onSuccess:f=>{let E={...f,From:{id:x==null?void 0:x.id,username:x==null?void 0:x.username}};m.emit("TEAM_ADD",E)}}),a.onClose(),s.target.value="")},D=s=>{v.mutateAsync(s)};return e.jsxs(I,{children:[e.jsx(h,{flexDir:"column",align:"center",children:e.jsxs(h,{width:"30em",flexDir:"column",gap:"5",children:[e.jsx(c,{fontSize:"2xl",children:"Project Settings"}),e.jsxs(I,{children:[e.jsx(c,{fontSize:"xl",children:"Categories"}),e.jsx(c,{fontSize:"sm",color:"primary.200",children:"Create multiple categories that can represents your team roles or bugs categories"})]}),e.jsxs(Ee,{children:[t.length>0&&t.map((s,f)=>e.jsx(hn,{isOwner:r,label:s.title,onDelete:()=>{B(s.id)},colorScheme:"brand"},f)),r&&e.jsxs(ze,{isOpen:i.isOpen,onClose:i.onClose,placement:"bottom",children:[e.jsx(Te,{children:e.jsxs(le,{size:"lg",variant:"subtle",colorScheme:"gray",borderRadius:"full",_hover:{cursor:"pointer"},onClick:i.onOpen,children:[e.jsx(Ae,{boxSize:"12px",as:re}),e.jsx(ce,{children:"Add"})]},"sm")}),e.jsxs(Le,{bg:"primary.900",border:"none",children:[e.jsx(Fe,{}),e.jsxs(Me,{as:h,flexDir:"column",gap:"3",children:[e.jsx(c,{children:"Category Title"}),e.jsx(se,{type:"text",placeholder:"Enter category name",onKeyDown:P})]})]})]})]})]})}),e.jsx(h,{flexDir:"column",align:"center",marginTop:"50px",children:e.jsxs(h,{width:"30em",flexDir:"column",gap:"5",children:[e.jsxs(I,{children:[e.jsx(c,{fontSize:"xl",children:"Teams"}),e.jsx(c,{fontSize:"sm",color:"primary.200",children:"Add members to your project team"})]}),e.jsxs(Ee,{children:[o.length>0&&o.map((s,f)=>e.jsx(Ft,{status:s.status,isOwner:r,label:s.User.username,src:s.User.avatar,onDelete:()=>{D(s.id)}},f)),r&&e.jsxs(ze,{isOpen:a.isOpen,onClose:a.onClose,placement:"bottom",children:[e.jsx(Te,{children:e.jsxs(le,{size:"lg",variant:"subtle",colorScheme:"gray",borderRadius:"full",_hover:{cursor:"pointer"},onClick:a.onOpen,children:[e.jsx(Ae,{boxSize:"12px",as:re}),e.jsx(ce,{children:"Add"})]},"sm")}),e.jsxs(Le,{bg:"primary.900",border:"none",children:[e.jsx(Fe,{}),e.jsxs(Me,{as:h,flexDir:"column",gap:"3",children:[e.jsx(c,{children:"Team"}),e.jsx(se,{type:"text",placeholder:"Enter email address of the User",onKeyDown:g})]})]})]})]})]})})]})}function jn({isOpen:t,onClose:o,data:n}){const{mutateAsync:r,isLoading:i,isSuccess:a,isError:m}=ht(),x={title:n==null?void 0:n.title,description:n==null?void 0:n.description},{successToast:y,errorToast:j}=ge();function d(v,{setSubmitting:P}){let B={pid:n.id,values:v};r(B),a&&(y("Project created successfully"),P(!1)),m&&j("Something went wrong!"),o()}return e.jsx(pe,{isOpen:t,onClose:o,header:"Edit Project",children:e.jsx(Ne,{initialValues:x,onSubmit:d,validationSchema:Ue({title:ie().required("Project name is required"),description:ie().required("Project description is required")}),children:({isSubmitting:v})=>e.jsx($e,{children:e.jsxs(h,{flexDirection:"column",gap:"5",children:[e.jsx(qe,{type:"text",name:"title",label:"Project Name",width:"600px",placeholder:"Enter project name"}),e.jsx(It,{name:"description",label:"Project Description",placeholder:"Enter short project description"}),e.jsx(U,{disabled:i,type:"submit",colorScheme:"brand",fontSize:"md",size:"md",children:"Submit"})]})})})})}function Mn({}){const t=G(),{id:o}=ut(),{data:n,isLoading:r,isError:i}=mt(Number(o)),a=xe(d=>d.user),m=(n==null?void 0:n.ownerId)===(a==null?void 0:a.id),x=n==null?void 0:n.Bug.filter(d=>d.status==="Open"&&d.priority===2).length,y=n==null?void 0:n.Bug.filter(d=>d.status==="Open"&&d.priority===1).length,j=n==null?void 0:n.Bug.filter(d=>d.status==="Open"&&d.priority===0).length;return e.jsxs(h,{flexDir:"column",gap:"10",children:[e.jsx(jn,{isOpen:t.isOpen,onClose:t.onClose,data:n}),e.jsx(I,{bg:"brand.800",children:r?e.jsx(X,{height:"50px"}):!i&&e.jsxs(h,{align:"center",justify:"space-between",height:200,children:[e.jsxs(h,{margin:"100px",flexDir:"column",children:[e.jsxs(h,{gap:"3",align:"center",children:[e.jsx(c,{fontSize:"4xl",children:n.title}),e.jsx(He,{icon:e.jsx(xt,{}),bg:"none",color:"primary.100",_hover:{bg:"none",color:"primary.300"},"aria-label":"edit-btn",onClick:t.onOpen})]}),e.jsx(c,{fontSize:"sm",color:"gray.200",children:n.description})]}),e.jsxs(h,{margin:"100px",gap:"10",children:[e.jsxs(h,{align:"center",flexDir:"column",children:[e.jsx(c,{fontSize:"",color:"primary.100",children:"Critical"}),e.jsx(c,{fontSize:"5xl",color:"red.500",children:x})]}),e.jsxs(h,{align:"center",flexDir:"column",children:[e.jsx(c,{fontSize:"",color:"primary.100",children:"High"}),e.jsx(c,{fontSize:"5xl",color:"orange.300",children:y})]}),e.jsxs(h,{align:"center",flexDir:"column",children:[e.jsx(c,{fontSize:"",color:"primary.100",children:"Low"}),e.jsx(c,{fontSize:"5xl",color:"gray.300",children:j})]})]})]})}),e.jsx(h,{gap:"5",children:r?e.jsx(X,{height:"50px"}):e.jsxs(e.Fragment,{children:[e.jsx(un,{isLoading:r,project:n}),e.jsx(gt,{orientation:"vertical",height:"50vh"}),e.jsx(fn,{categories:n.Category,teams:n.Member,pid:n.id,isOwner:m})]})})]})}export{Mn as default};
